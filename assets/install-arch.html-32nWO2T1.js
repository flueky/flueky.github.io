import{ah as t,ai as l,ak as s,al as a,am as h,an as n,aj as e}from"./app-CVgx3x6u.js";const k="/assets/image/103/014.jpg",p="/assets/image/103/015.jpg",r="/assets/image/103/001.png",d="/assets/image/103/002.png",g="/assets/image/103/003.png",c="/assets/image/103/004.png",o="/assets/image/103/005.png",A="/assets/image/103/006.png",y="/assets/image/103/007.png",F="/assets/image/103/008.png",f="/assets/image/103/009.png",m="/assets/image/103/010.png",E="/assets/image/103/011.png",b="/assets/image/103/013.png",u="/assets/image/103/012.png",v="/assets/image/103/016.png",_="/assets/image/103/017.png",C="/assets/image/103/018.png",x="/assets/image/103/019.png",B="/assets/image/103/020.png",w="/assets/image/103/021.png",I="/assets/image/103/022.png",D="/assets/image/103/023.png",S="/assets/image/103/024.png",T="/assets/image/103/025.png",U={};function G(z,i){return e(),l("div",null,[i[0]||(i[0]=s("p",null,[a("Arch 安装教程，支持UEFI和BIOS两种方式。官方教程"),s("a",{href:"https://wiki.archlinux.org/index.php/Installation_guide_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)",target:"_blank",rel:"noopener noreferrer"},"地址"),a("。")],-1)),h(" more "),i[1]||(i[1]=n('<h2 id="环境准备" tabindex="-1"><a class="header-anchor" href="#环境准备"><span>环境准备</span></a></h2><h3 id="真机" tabindex="-1"><a class="header-anchor" href="#真机"><span>真机</span></a></h3><h4 id="引导模式" tabindex="-1"><a class="header-anchor" href="#引导模式"><span>引导模式</span></a></h4><p>在真机上装 Arch ，尤其是准备装双系统，建议了解下自己主板兼容的引导模式。开机时 按下 F2 键，进入主板系统界面。</p><img src="'+k+'"><p>如图示的主板信息，支持 Legacy （传统模式，记BIOS）和 UEFI 模式。不同的模式，在后续分区操作、安装引导程序时略有区别。如需安装双系统，建议使用 UEFI 模式。</p><h4 id="制作启动盘" tabindex="-1"><a class="header-anchor" href="#制作启动盘"><span>制作启动盘</span></a></h4><p>Arch 系统镜像比较小，约 700MB 。官方<a href="https://archlinux.org/download/" target="_blank" rel="noopener noreferrer">下载地址</a>，通常比较慢，建议使用国内镜像下载地址：<a href="https://mirrors.tuna.tsinghua.edu.cn/archlinux/iso/2021.01.01/" target="_blank" rel="noopener noreferrer">清华镜像</a>，<a href="https://mirrors.ustc.edu.cn/archlinux/iso/2021.01.01/" target="_blank" rel="noopener noreferrer">中科大镜像</a>。</p><p>使用 <a href="https://cn.ultraiso.net/" target="_blank" rel="noopener noreferrer">UtraIso</a> 工具将下载下来的 ios 文件写入 U 盘中。具体破解方式和制作启动盘的方式百度有很多。</p><p>最后在开机时，按住 F12 出现如下页面，选择从 U 盘启动。</p><img src="'+p+'"><p><strong>不同主板之间略有差异，F2 和 F12 支持多数主板，如无效，则需要确认好主板厂商，了解到具体的设置方式。</strong></p><p>安装过程中，需要一根网线直连路由器，比在安装过程中使用拨号连接和 wifi 连接方便。</p><h3 id="虚拟机" tabindex="-1"><a class="header-anchor" href="#虚拟机"><span>虚拟机</span></a></h3><p>推荐使用 VirtualBox 虚拟机，<a href="https://www.virtualbox.org/wiki/Downloads" target="_blank" rel="noopener noreferrer">下载地址</a>。</p><img src="'+r+'"><p>新建虚拟电脑。</p><img src="'+d+'"><p>设置系统类型。</p><img src="'+g+'"><p>设置内存大小，根据实际内存大小分配。最少1G，建议2G。如果内存够大，请任性些。<strong>1GB=1024MB</strong>。</p><img src="'+c+'"><p>创建虚拟硬盘。</p><img src="'+o+'"><p>选择虚拟硬盘文件类型。</p><img src="'+A+'"><p>设置使用动态分配的方式。即，设置虚拟硬盘100G，最后根据实际的系统占用空间，占用物理硬盘空间。</p><img src="'+y+'"><p>确认虚拟硬盘文件位置和大小后，创建虚拟电脑。再次打开设置。</p><img src="'+F+'"><p>设置系统启动顺序。硬盘第一，光驱第二。<br> 设置是否启用 EFI 。同主板的 BIOS 和 UEFI 区别。</p><img src="'+f+'"><p>如果主机是多核多线程 CPU ，可以适当添加 CPU 数量。</p><img src="'+m+'"><p>设置显存大小，建议模式。</p><img src="'+E+'"><p>对虚拟光驱，添加下载下来的安装镜像文件。</p><img src="'+b+'"><p>网络模式中，选择 NAT 模式。这样，虚拟电脑可以使用真机网络。</p><img src="'+u+'"><p>配置完成后，启动虚拟电脑。</p><h2 id="安装系统" tabindex="-1"><a class="header-anchor" href="#安装系统"><span>安装系统</span></a></h2><p><strong>为方便截图，后续操作都在虚拟机中执行</strong>。</p><p>启动后，可以见到下面两图中的一个。第一个是 BIOS 模式启动，第二个是 UEFI 模式启动。</p><img src="'+v+'"><img src="'+_+'"><p>启动后，在图示状态下，判断联网情况。真机安装模式下，需要将网线连接路由器，虚拟机安装模式下，需要使用 NAT 联网方式（见虚拟机的配置）。</p><img src="'+C+`"><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ping</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www.baidu.com</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 若 ping 测试发现联网失败，启用 dhcp 服务</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> enable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dhcpcd</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # 启用</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> start</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dhcpcd</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  # 启动</span></span></code></pre></div><h3 id="硬盘分区" tabindex="-1"><a class="header-anchor" href="#硬盘分区"><span>硬盘分区</span></a></h3><p>真机安装时，硬盘通常已有分区。如无重要数据，可以直接格式化全盘。如，保留硬盘中数据，或安装双系统，请确保至少有一个空的磁盘分区。</p><p>Linux 中磁盘概念与 Windows 不一样。第一块硬盘记 sda ，多块硬盘依次记 sda sdb sdc ... 。第一块硬盘的第一个分区记 sda1 ，多个分区依次记 sda1 sda2 sda3 ...。</p><p>虚拟机安装时，之前创建的是一块空硬盘，因此还需要设置分区表。如果在真机上安装时，允许全盘格式化硬盘，也可以重新设置分区表。</p><p>分区表有两种，MBR 和 GPT 。对应不同的主板模式。建议 BIOS + MBR ，UEFI + GPT 。换种组合，可能导致，无法正确进入系统，尤其是双系统安装的场景。</p><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 以下是修改硬盘分区时涉及到的命令，不一定需要全部执行。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">fdisk</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -l</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # 查看硬盘及分区情况</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">parted</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/sda</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # 修改硬盘分区表，只有新硬盘需执行</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    mktable</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     # 设置分区表</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        gpt</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     # GPT 分区表</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        msdos</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">   # MBR 分区表</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    quit</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        # 退出 parted</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cfdisk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/sda</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # 对硬盘进行分区。可以只操作硬盘中的一个分区。</span></span></code></pre></div><p>cfdisk 命令弹出可交互式命令终端。真机安装时，希望只在其中一个硬盘分区中安装 Arch ，直接通过方向键选中待安装的分区，如，sda4 ，选择 Delete 删除分区信息。 New 新建分区，输入待分区大小。选择 Type 设置分区类型，主要有三个 ：EFI System，Linux swap Linux filesystem 。选择 Write 写入分区信息。选择 Quit ，退出分区程序。分区示例，如下。</p><img src="`+x+`"><h3 id="分区建议" tabindex="-1"><a class="header-anchor" href="#分区建议"><span>分区建议</span></a></h3><h4 id="bios-mbr" tabindex="-1"><a class="header-anchor" href="#bios-mbr"><span>BIOS+MBR</span></a></h4><ol><li>交换空间，4G。挂载点，（可选）。</li><li>根分区，40G，挂载点 / 。</li><li>用户分区，剩余可用空间，挂载点 /home （可选）。</li></ol><h4 id="uefi-gpt" tabindex="-1"><a class="header-anchor" href="#uefi-gpt"><span>UEFI+GPT</span></a></h4><ol><li>EFI 系统分区，300M，挂载点 /boot/efi。</li><li>交换空间，4G。挂载点，（可选）。</li><li>根分区，40G，挂载点 / 。</li><li>用户分区，剩余可用空间，挂载点 /home （可选）。</li></ol><blockquote><ul><li>真机安装时，如果内存够大，如8G，则无须使用交换空间。</li><li>用户分区非必须。若重装系统时，根分区需要格式化，用户分区则不需要。相当于 windows下 C 盘和 D 盘的区别。</li></ul></blockquote><h3 id="格式化分区" tabindex="-1"><a class="header-anchor" href="#格式化分区"><span>格式化分区</span></a></h3><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkfs.ext4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/sda3</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # 格式化根分区，Linux filesystem类型</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkfs.ext4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/sda4</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # 格式化用户分区</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkfs.vfat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/sda1</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # 格式化EFI系统分区，EFI System类型</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkswap</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/sda2</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    # 格式化交换空间，Linux swap 类型</span></span></code></pre></div><h3 id="挂载分区" tabindex="-1"><a class="header-anchor" href="#挂载分区"><span>挂载分区</span></a></h3><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mount</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/sda3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /mnt</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">         # 挂载根分区到 /mnt 目录</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> home</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">                   # 建立用户分区目录</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mount</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/sda4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /mnt/home</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    # 挂载用户分区到 /mnt/home 目录</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /mnt/boot</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /mnt/boot/efi</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">          # 建议efi分区目录</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mount</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/sda1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /mnt/boot/efi</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # 挂载 EFI系统分区到 /mnt/boot/efi</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">swapon</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/sda2</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">             # 挂载交换空间</span></span></code></pre></div><p>以上命令根据实际分区情况执行。</p><h3 id="修改安装源" tabindex="-1"><a class="header-anchor" href="#修改安装源"><span>修改安装源</span></a></h3><p>安装过程，需要下载大量的系统文件，配置国内的安装源，有利于加快安装速度。</p><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">vim</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/pacman.d/mirrorlist</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # 编辑安装源清单文件</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 以下是对 vim 的一些操作方式</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    /China</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # 搜索 China 字符串</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        回车</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # 执行搜索</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        n</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">   # 搜索下一个</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    2dd</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    #     看Server，找到 ustc 的地址，剪切两行</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    gg</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">     # 回到第一行</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    p</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">      # 移动光标到适当位置，粘贴</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    esc</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    # 退出编辑状态</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    !</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wq</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    # 保存并退出 vim </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 正确修改安装源之后，更新源</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pacman</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -Syy</span></span></code></pre></div><img src="`+B+`"><h3 id="安装系统文件" tabindex="-1"><a class="header-anchor" href="#安装系统文件"><span>安装系统文件</span></a></h3><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 下载 arch 基础组件和 linux 内核，后面过程，全部回车</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pacstrap</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /mnt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> base</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> linux</span></span></code></pre></div><img src="`+w+`"><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 生成 fstab 文件，用于启动时挂载硬盘</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">genfstab</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -U</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /mnt</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt;&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/mnt/etc/fstab</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /mnt/etc/fstab</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # 查看刚刚生成的文件</span></span></code></pre></div><img src="`+I+`"><h3 id="配置系统" tabindex="-1"><a class="header-anchor" href="#配置系统"><span>配置系统</span></a></h3><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">arch-chroot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /mnt</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">         # 进入安装的系统</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">passwd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">              # 设置 root 账户密码</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pacman</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -S</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dhcpcd</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">         # 下载 dhcp 服务</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> enable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dhcpcd</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  # 启用 dhcp 服务</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> start</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dhcpcd</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">   # 启动 dhcp 服务</span></span></code></pre></div><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pacamn</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -S</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> grub</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">               # 安装 grub 引导程序</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pacman</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -S</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> efibootmgr</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">         # 安装 efi 启动程序，可选</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 双系统需要安装读 ntfs 分区和检测windows系统程序</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pacman</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -S</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> os-prober</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ntfs-3g</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 安装 BIOS+MBR 的引导程序</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grub-install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --target=i386-pc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/sda</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 安装 UEFI+GPT 的引导程序</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grub-install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --target=x86_64-efi</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --efi-directory=/boot/efi</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --bootloader-id=Arch</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 生成引导文件</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grub-mkconfig</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /boot/grub/grub.cfg</span></span></code></pre></div><img src="`+D+`"><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">exit</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # 退出系统</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">reboot</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # 重启虚拟机或电脑</span></span></code></pre></div><p>重新启动后，输入密码如图示：</p><img src="`+S+`"><h3 id="设置时区" tabindex="-1"><a class="header-anchor" href="#设置时区"><span>设置时区</span></a></h3><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 设置时区</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ln</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -sf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/share/zoneinfo/Asia/Shanghai</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/localtime</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 设置在线同步时间</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">timedatectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> set-ntp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 查看时间信息 UTC，格林威治时间，CST 北京时间。差8个时区</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tiemdatectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> status</span></span></code></pre></div><img src="`+T+`"><h3 id="添加用户" tabindex="-1"><a class="header-anchor" href="#添加用户"><span>添加用户</span></a></h3><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">useradd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> wheel</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /bin/bash</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> zkf</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> #用户名，做开发 首字母</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">passwd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> zkf</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # 设置 zkf 用户密码 ，需要输入两次 </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 提权操作，默认的 zkf 账户，无法获取 root 权限</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pacman</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -S</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> vi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # 安装必备程序</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">visudo</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">            # 编辑提权文件</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 同 vim 的操作，删除 %wheel ALL=(ALL) ALL 或其下面一行之前的井号。下面使用 sudo 命令不需要密码</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    /wheel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    :wq</span></span></code></pre></div><h3 id="本地化" tabindex="-1"><a class="header-anchor" href="#本地化"><span>本地化</span></a></h3><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pacman</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -S</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> vim</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # 安装 vim，之前可以用 vim 是安装包附带的，新系统需要重新安装</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">vim</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/locale.gen</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # 修改本地化配置文件</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 打开 en_US.UTF-8 ,zh_CN.UTF-8前的井号</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">locale-gen</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # 生成配置</span></span></code></pre></div><p>至此，Arch 系统即安装配置完成。后续还会有图形化系统安装和桌面美化。</p><p>下次开机时，即可登录刚创建的 zkf 账户。或者输入 exit 退出 root ，直接登录 zkf 也可以。</p><p>最后两个命令</p><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">poweroff</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> # 关机 </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">restart</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  # 重启</span></span></code></pre></div>`,95))])}const N=t(U,[["render",G],["__file","install-arch.html.vue"]]),O=JSON.parse(`{"path":"/install-arch.html","title":"Arch 安装教程","lang":"zh-CN","frontmatter":{"title":"Arch 安装教程","date":"2021-01-22 18:05:38 +0800","categories":"Arch","tag":null,"description":"Arch 安装教程，支持UEFI和BIOS两种方式。官方教程地址。","head":[["link",{"rel":"canonical","href":"https://plugin-flueky.vuejs.press/install-arch.html"}],["meta",{"property":"og:url","content":"https://vuepress-theme-hope.github.io/install-arch.html"}],["meta",{"property":"og:site_name","content":"Flueky's 技术小站"}],["meta",{"property":"og:title","content":"Arch 安装教程"}],["meta",{"property":"og:description","content":"Arch 安装教程，支持UEFI和BIOS两种方式。官方教程地址。"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-10-16T16:46:05.000Z"}],["meta",{"property":"article:published_time","content":"2021-01-22T10:05:38.000Z"}],["meta",{"property":"article:modified_time","content":"2024-10-16T16:46:05.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Arch 安装教程\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2021-01-22T10:05:38.000Z\\",\\"dateModified\\":\\"2024-10-16T16:46:05.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Flueky Zuo\\",\\"url\\":\\"https://flueky.github.io/blog/\\",\\"email\\":\\"flueky.zuo@gmail.com\\"}]}"]]},"headers":[{"level":2,"title":"环境准备","slug":"环境准备","link":"#环境准备","children":[{"level":3,"title":"真机","slug":"真机","link":"#真机","children":[]},{"level":3,"title":"虚拟机","slug":"虚拟机","link":"#虚拟机","children":[]}]},{"level":2,"title":"安装系统","slug":"安装系统","link":"#安装系统","children":[{"level":3,"title":"硬盘分区","slug":"硬盘分区","link":"#硬盘分区","children":[]},{"level":3,"title":"分区建议","slug":"分区建议","link":"#分区建议","children":[]},{"level":3,"title":"格式化分区","slug":"格式化分区","link":"#格式化分区","children":[]},{"level":3,"title":"挂载分区","slug":"挂载分区","link":"#挂载分区","children":[]},{"level":3,"title":"修改安装源","slug":"修改安装源","link":"#修改安装源","children":[]},{"level":3,"title":"安装系统文件","slug":"安装系统文件","link":"#安装系统文件","children":[]},{"level":3,"title":"配置系统","slug":"配置系统","link":"#配置系统","children":[]},{"level":3,"title":"设置时区","slug":"设置时区","link":"#设置时区","children":[]},{"level":3,"title":"添加用户","slug":"添加用户","link":"#添加用户","children":[]},{"level":3,"title":"本地化","slug":"本地化","link":"#本地化","children":[]}]}],"git":{"createdTime":1729097165000,"updatedTime":1729097165000,"contributors":[{"name":"Flueky Zuo","email":"flueky.zuo@zoom.us","commits":1}]},"readingTime":{"minutes":7.47,"words":2241},"filePathRelative":"install-arch.md","localizedDate":"2021年1月22日","excerpt":"<p>Arch 安装教程，支持UEFI和BIOS两种方式。官方教程<a href=\\"https://wiki.archlinux.org/index.php/Installation_guide_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">地址</a>。</p>\\n","autoDesc":true}`);export{N as comp,O as data};
